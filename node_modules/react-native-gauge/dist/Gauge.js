var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var Progress=_interopRequireWildcard(require("react-native-progress"));var _maskedView=_interopRequireDefault(require("@react-native-masked-view/masked-view"));var _reactNativeAnchorPoint=require("react-native-anchor-point");var _useDidMountEffect=_interopRequireDefault(require("../helper/useDidMountEffect"));var _expoLinearGradient=require("expo-linear-gradient");var _this=this,_jsxFileName="C:\\Users\\fasta\\react-native-gauge-test\\react-native-gauge\\src\\js\\Gauge.js";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var CIRCLE=Math.PI*2;var Gauge=function Gauge(props){var style=_reactNative.StyleSheet.compose(styles.arc,props.style);var size=props.size,progress=props.progress,animated=props.animated,overallGradient=props.overallGradient,addTriangleTip=props.addTriangleTip,triangleTipWidth=props.triangleTipWidth,triangleTipHeight=props.triangleTipHeight,triangleNeedle=props.triangleNeedle,addCircle=props.addCircle,circleSize=props.circleSize,addTriangleBase=props.addTriangleBase,triangleBaseWidth=props.triangleBaseWidth,triangleBaseHeight=props.triangleBaseHeight,alwaysUseEndAngle=props.alwaysUseEndAngle,endAngle=props.endAngle,unfilledEndAngle=props.unfilledEndAngle,rotate=props.rotate,thickness=props.thickness,borderWidth=props.borderWidth,needleWidth=props.needleWidth,needleHeight=props.needleHeight,needleBorderRadius=props.needleBorderRadius,translateNeedleY=props.translateNeedleY,color=props.color,borderColor=props.borderColor,needleColor=props.needleColor,unfilledColor=props.unfilledColor,circleColor=props.circleColor,triangleTipColor=props.triangleTipColor,triangleBaseColor=props.triangleBaseColor,gradientStyle=props.gradientStyle;var prevCountRef=(0,_react.useRef)();(0,_useDidMountEffect.default)(function(){if(animated){prevCountRef.current=progress*CIRCLE*unfilledEndAngle;moveNeedleFn();}},[progress,unfilledEndAngle]);var moveNeedle=(0,_react.useRef)(new _reactNative.Animated.Value(progress*CIRCLE*unfilledEndAngle)).current;var moveNeedleFn=function moveNeedleFn(){_reactNative.Animated.spring(moveNeedle,{toValue:progress*CIRCLE*unfilledEndAngle,bounciness:0,useNativeDriver:true}).start();};return _react.default.createElement(_reactNative.View,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:69,columnNumber:5}},overallGradient?_react.default.createElement(_reactNative.View,{style:(0,_extends2.default)({},styles.maskContainer,{height:size,width:size}),__self:_this,__source:{fileName:_jsxFileName,lineNumber:71,columnNumber:9}},_react.default.createElement(_maskedView.default,{maskElement:_react.default.createElement(Progress.Circle,{size:size,progress:progress,alwaysUseEndAngle:alwaysUseEndAngle,endAngle:endAngle,unfilledEndAngle:unfilledEndAngle,thickness:thickness,borderWidth:borderWidth,color:color,borderColor:borderColor,unfilledColor:unfilledColor,indeterminate:false,style:(0,_extends2.default)({},style,{transform:[{rotate:rotate}]}),__self:_this,__source:{fileName:_jsxFileName,lineNumber:79,columnNumber:15}},_react.default.createElement(_reactNative.Animated.View,{style:[{position:'absolute',width:triangleNeedle?0:needleWidth,height:triangleNeedle?0:needleHeight,top:size/2-needleHeight-translateNeedleY/2,borderTopWidth:0,borderLeftWidth:triangleNeedle?needleWidth:0,borderRightWidth:triangleNeedle?needleWidth:0,borderBottomWidth:triangleNeedle?needleHeight:0,backgroundColor:triangleNeedle?'transparent':needleColor,borderRadius:triangleNeedle?0:needleBorderRadius,borderStyle:'solid',borderLeftColor:'transparent',borderRightColor:'transparent',borderBottomColor:needleColor},(0,_reactNativeAnchorPoint.withAnchorPoint)({transform:[{rotateZ:moveNeedle},{translateY:-translateNeedleY}]},{x:0.5,y:1},{width:needleWidth,height:needleHeight+translateNeedleY})],__self:_this,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:17}},addTriangleTip&&_react.default.createElement(_reactNative.View,{style:{alignSelf:'center',top:-triangleTipHeight,borderTopWidth:0,borderStyle:'solid',borderLeftColor:'transparent',borderRightColor:'transparent',borderBottomColor:triangleTipColor,borderLeftWidth:triangleTipWidth,borderRightWidth:triangleTipWidth,borderBottomWidth:triangleTipHeight},__self:_this,__source:{fileName:_jsxFileName,lineNumber:127,columnNumber:21}}),addTriangleBase&&_react.default.createElement(_reactNative.Animated.View,{style:{position:'absolute',alignSelf:'center',top:triangleBaseHeight+needleHeight/2-1,borderTopWidth:0,borderStyle:'solid',borderLeftColor:'transparent',borderRightColor:'transparent',borderBottomColor:triangleBaseColor,borderLeftWidth:triangleBaseWidth,borderRightWidth:triangleBaseWidth,borderBottomWidth:triangleBaseHeight},__self:_this,__source:{fileName:_jsxFileName,lineNumber:143,columnNumber:21}})),addCircle&&_react.default.createElement(_reactNative.Animated.View,{style:{position:'absolute',height:circleSize,width:circleSize,borderRadius:circleSize/2,backgroundColor:circleColor,transform:[{rotateZ:moveNeedle}]},__self:_this,__source:{fileName:_jsxFileName,lineNumber:161,columnNumber:19}})),__self:_this,__source:{fileName:_jsxFileName,lineNumber:77,columnNumber:11}},_react.default.createElement(_expoLinearGradient.LinearGradient,{colors:overallGradient,style:(0,_extends2.default)({},gradientStyle,{height:size,width:size}),__self:_this,__source:{fileName:_jsxFileName,lineNumber:174,columnNumber:13}}))):_react.default.createElement(Progress.Circle,{size:size,progress:progress,alwaysUseEndAngle:alwaysUseEndAngle,endAngle:endAngle,unfilledEndAngle:unfilledEndAngle,thickness:thickness,borderWidth:borderWidth,color:color,borderColor:borderColor,unfilledColor:unfilledColor,indeterminate:false,style:(0,_extends2.default)({},style,{transform:[{rotate:rotate}]}),__self:_this,__source:{fileName:_jsxFileName,lineNumber:185,columnNumber:9}},_react.default.createElement(_reactNative.Animated.View,{style:[{position:'absolute',width:triangleNeedle?0:needleWidth,height:triangleNeedle?0:needleHeight,top:size/2-needleHeight-translateNeedleY/2,borderTopWidth:0,borderLeftWidth:triangleNeedle?needleWidth:0,borderRightWidth:triangleNeedle?needleWidth:0,borderBottomWidth:triangleNeedle?needleHeight:0,backgroundColor:triangleNeedle?'transparent':needleColor,borderRadius:triangleNeedle?0:needleBorderRadius,borderStyle:'solid',borderLeftColor:'transparent',borderRightColor:'transparent',borderBottomColor:needleColor},(0,_reactNativeAnchorPoint.withAnchorPoint)({transform:[{rotateZ:moveNeedle},{translateY:-translateNeedleY}]},{x:0.5,y:1},{width:needleWidth,height:needleHeight+translateNeedleY})],__self:_this,__source:{fileName:_jsxFileName,lineNumber:198,columnNumber:11}},addTriangleTip&&_react.default.createElement(_reactNative.View,{style:{alignSelf:'center',top:-triangleTipHeight,borderTopWidth:0,borderStyle:'solid',borderLeftColor:'transparent',borderRightColor:'transparent',borderBottomColor:triangleTipColor,borderLeftWidth:triangleTipWidth,borderRightWidth:triangleTipWidth,borderBottomWidth:triangleTipHeight},__self:_this,__source:{fileName:_jsxFileName,lineNumber:231,columnNumber:15}})),addCircle&&_react.default.createElement(_reactNative.Animated.View,{style:{position:'absolute',height:circleSize,width:circleSize,borderRadius:circleSize/2,backgroundColor:circleColor,transform:[{rotateZ:moveNeedle}]},__self:_this,__source:{fileName:_jsxFileName,lineNumber:248,columnNumber:13}})));};Gauge.defaultProps={size:30,progress:0.5,overallGradient:false,addTriangleTip:false,triangleTipWidth:2,triangleTipHeight:4,triangleNeedle:false,addCircle:false,circleSize:15,addTriangleBase:false,triangleBaseWidth:5,triangleBaseHeight:20,animated:true,alwaysUseEndAngle:true,endAngle:0.9,unfilledEndAngle:0.9,rotate:'-90deg',thickness:6,borderWidth:1,needleWidth:2,needleHeight:45,needleBorderRadius:0,translateNeedleY:0,color:'blue',borderColor:'blue',needleColor:'blue',unfilledColor:'grey',circleColor:'blue',triangleTipColor:'blue',triangleBaseColor:'blue',gradientStyle:{}};var styles;if(_reactNative.Platform.OS==='ios'){styles=_reactNative.StyleSheet.create({arc:{alignItems:'center',justifyContent:'center'},maskContainer:{justifyContent:'center',alignItems:'center'}});}else{styles=_reactNative.StyleSheet.create({arc:{alignItems:'center',justifyContent:'center'},maskContainer:{justifyContent:'center',alignItems:'center'}});}var _default=Gauge;exports.default=_default;